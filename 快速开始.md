# 🚀 快速开始指南

> 10 分钟内从零开始运行

**[English](QUICK_START.md) | [中文](#第一步安装-nodejs)**

---

## 第一步：安装 Node.js

**如果你还没有 Node.js：**

下载地址：https://nodejs.org/ （选择 LTS 版本）

**验证安装：**
```bash
node --version
# 应显示 v18.0.0 或更高
```

---

## 第二步：下载项目

### 方式 A：通过终端
```bash
git clone https://github.com/Purest-11/Gestalt.git
cd Gestalt
```

### 方式 B：直接下载
1. 访问 https://github.com/Purest-11/Gestalt
2. 点击绿色 "Code" 按钮 → "Download ZIP"
3. 解压后在终端中打开该文件夹

---

## 第三步：安装依赖

```bash
npm install
```

等待约 1-2 分钟。

---

## 第四步：启动系统

```bash
./start.sh
```

你会看到交互式菜单：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🚀 单机模式
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1) 🎭 本地演出模式      ← 首次测试选这个
  2) 🌐 国际公网 [Cloudflare]
  3) 🇨🇳 国内公网 [cpolar]

  ...更多选项...
```

**输入 `1` 然后回车**，进入本地模式。

---

## 第五步：测试系统

控制台会显示访问地址：

```
╔════════════════════════════════════════════╗
║          📱 演员动作捕捉                    ║
╠════════════════════════════════════════════╣
║  http://localhost:3000/mocap/?performer=1   ║
╚════════════════════════════════════════════╝

╔════════════════════════════════════════════╗
║            👥 观众监控面板                  ║
╠════════════════════════════════════════════╣
║  http://192.168.1.xxx:3002/?performer=audience ║
╚════════════════════════════════════════════╝
```

### 测试流程

1. **打开动作捕捉页面**
   - 访问 `http://localhost:3000/mocap/?performer=1`
   - 允许摄像头访问
   - 挥手，看到骨骼追踪效果

2. **用手机打开观众页面**
   - 用手机扫描监控面板上的二维码
   - 或手动输入地址：`http://你的IP:3002/audience-touch/`
   - 在屏幕上触摸滑动

3. **查看监控面板**
   - 访问 `http://localhost:3002/?performer=audience`
   - 看到观众变成粒子
   - 看到你的动作捕捉数据

---

## 第六步：连接 Max/MSP

系统通过 UDP 发送 OSC 数据：

| 数据 | 端口 | 对象 |
|------|------|------|
| 演员 | 7400 | `[udpreceive 7400]` |
| 观众 | 7402 | `[udpreceive 7402]` |

**在 Max 中创建这个：**

```maxpat
[udpreceive 7400]
      |
[oscparse]
      |
[route /performer1]
      |
[print]           ← 查看所有演员数据
```

---

## 🎯 实用场景

### 场景一：排练

只有你和笔记本：
- 运行 `./start.sh` → 选择 1（本地模式）
- 在浏览器打开动作捕捉
- 连接 Max/MSP
- 完成！

### 场景二：本地演出

有 WiFi 的场馆或使用便携路由器：
- 将电脑和观众手机连接到同一网络
- 运行 `./start.sh` → 选择 1（本地模式）
- 观众扫码加入
- **最佳延迟：20-30ms**

### 场景三：国际活动

与会者使用各种网络：
- 运行 `./start.sh` → 选择 2（Cloudflare）
- 系统自动创建公网地址
- 将地址分享给与会者
- **注意**：延迟较高（50-150ms）

---

## ⚠️ 常见问题

### "Command not found: ./start.sh"

```bash
chmod +x start.sh
./start.sh
```

### 摄像头不工作

- 确保浏览器有摄像头权限
- 尝试使用 Chrome（兼容性更好）
- 检查没有其他应用占用摄像头

### 观众无法连接

1. 确保手机和电脑在同一 WiFi
2. 检查 IP 地址是否正确
3. 检查防火墙没有阻止端口 3002

### Max 收不到数据

1. 检查 `[udpreceive 7400]` 是否打开（没有锁定）
2. 确保服务器正在运行
3. 用 `[print]` 验证 route 后的输出

---

## 📖 下一步

| 我想... | 看这个 |
|---------|--------|
| 用 Docker 启动 | [Docker 指南（中文）](docs/DOCKER_GUIDE.md) |
| 查看所有 OSC 地址 | [Max/MSP 参考（中文）](docs/MAXMSP_QUICK_REF.md) |
| 处理观众数据 | [观众数据指南（中文）](docs/MAXMSP_AUDIENCE_GUIDE.md) |

---

**祝你演出成功！** 🎭
