# ◈ Gestalt 快速开始

**写给只想让它跑起来的艺术家。**

---

## 选择启动方式

| 方式 | 适合人群 |
|------|---------|
| **[Docker 方式](#-docker-方式)** ⭐ | 新手，快速上手 |
| **[直接运行](#-直接运行)** | 需要更多控制 |

---

## 🐳 Docker 方式

### 第一步：安装 Docker Desktop

1. 下载：https://www.docker.com/products/docker-desktop/
2. 安装并**启动**
3. 等待显示 "Docker is running"

### 第二步：下载并启动

```bash
# 下载（或从 GitHub 下载 ZIP 解压）
git clone https://github.com/YOUR_USERNAME/gestalt.git
cd gestalt

# 启动
./docker-start.sh
```

**首次启动需要 2-5 分钟**（下载镜像）。

### 第三步：选择模式

你会看到这个菜单：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🚀 单机模式（需要高性能电脑）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1) 🎭 本地演出模式
     观众需连同一WiFi

  2) 🌐 公网模式 [Cloudflare]
     适合国外演出

  3) 🇨🇳 公网模式 [cpolar]
     适合国内演出，延迟更低

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🖥️🖥️ 双机模式（两台电脑，性能要求低）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  4) 👁️ 视觉机 - 本地观众
  5) 🌐 视觉机 - 公网观众 [Cloudflare]
  6) 🇨🇳 视觉机 - 公网观众 [cpolar]
```

**首次测试，选择 `1`**（本地演出模式）。

### 第四步：打开浏览器

启动后会显示地址：

```
🎭 演员端：http://localhost:3000/mocap/?performer=1
👥 观众端：http://你的IP:3002/audience-touch/
📊 监控台：http://localhost:3002/?performer=audience
```

**测试：**
1. 用 Chrome 打开**演员端** → 允许摄像头 → 挥手
2. 用手机扫描监控台中的二维码 → 打开**观众端** → 触摸滑动
3. 查看**监控台** → 看到观众变成粒子

### 第五步：连接 Max/MSP

```
[udpreceive 7400]    ← 演员数据
[udpreceive 7402]    ← 观众数据
      |
[oscparse]
      |
[print]              ← 查看收到的数据
```

**搞定！** 🎉

---

## 💻 直接运行

### 第一步：安装 Node.js

1. 下载：https://nodejs.org/（选 LTS 版本）
2. 安装

验证：
```bash
node --version    # 应该显示 v18+
```

### 第二步：下载并启动

```bash
git clone https://github.com/YOUR_USERNAME/gestalt.git
cd gestalt
npm install
./start.sh
```

### 第三步：选择模式

你会看到这个菜单：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🚀 单机模式（需要高性能电脑，自动分屏投放）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1) 🎭 本地演出模式 + 分屏
  2) 🌐 公网模式（国外）[Cloudflare]
  3) 🇨🇳 公网模式（国内）[cpolar]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🖥️🖥️ 双机模式（两台电脑连同一 WiFi）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  4) 🎭 演员机 (MediaPipe + Max MSP)
  5) 👁️ 视觉机 - 本地观众
  6) 🌐 视觉机 - 公网观众 [Cloudflare]
  7) 🇨🇳 视觉机 - 公网观众 [cpolar]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ⚙️ 其他选项
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  8) 🔗 显示访问地址
  9) 🛑 停止所有系统
  L) 🌍 切换语言
  q) 退出
```

**首次测试，选择 `1`**。

### 第四步：测试

和 Docker 一样 — 打开浏览器访问那些地址。

---

## 🎯 如何选择模式？

| 场景 | 选择 |
|------|------|
| **测试 / 彩排** | 1（本地） |
| **小型演出（<100人）** | 1（本地） |
| **国际演出** | 2（Cloudflare） |
| **国内演出** | 3（cpolar） |
| **大型演出（>100人）** | 4+5/6/7（双机） |

---

## ❓ 常见问题

### 摄像头不工作
- 使用 **Chrome** 浏览器
- 允许摄像头权限
- 关闭其他使用摄像头的应用

### 手机连不上
- 确保手机和电脑在**同一个 WiFi**
- 检查 IP 地址是否正确
- 防火墙可能阻止了端口 3002

### Max 收不到数据
- 检查端口：7400（演员）或 7402（观众）
- 确保服务器正在运行

### Docker 启动不了
- 确保 Docker Desktop **正在运行**（看鲸鱼图标）
- Mac 用户：在系统偏好设置中允许 Docker

### 国内用户：Docker 下载很慢
- 运行 `./docker-mirror-setup.sh` 配置镜像加速
- 或在 docker-start.sh 菜单中选择 `m` 选项

---

## 📚 更多信息

- [完整 OSC 参考](docs/MAXMSP_QUICK_REF.md)
- [Docker 指南](docs/DOCKER_GUIDE.md)
- [观众数据指南](docs/MAXMSP_AUDIENCE_GUIDE.md)
