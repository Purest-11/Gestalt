# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ‡¨ğŸ‡³ å›½å†…å…¬ç½‘æ¨¡å¼ - cpolar éš§é“é…ç½®
# 
# ä½¿ç”¨æ–¹æ³•ï¼š
#   1. é¦–å…ˆé…ç½® authtokenï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰ï¼š
#      docker run --rm -v cpolar-config:/root/.cpolar probezy/cpolar authtoken ä½ çš„TOKEN
#
#   2. å¯åŠ¨ç³»ç»Ÿï¼š
#      docker-compose -f docker-compose.yml -f docker-compose.cpolar.yml up -d
#
# è·å– authtokenï¼šæ³¨å†Œ https://www.cpolar.com ååœ¨æ§åˆ¶å°è·å–
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

version: '3.8'

services:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ğŸ‡¨ğŸ‡³ cpolar éš§é“ï¼ˆå›½å†…å…¬ç½‘å…¥å£ï¼‰
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  cpolar-tunnel:
    image: probezy/cpolar:latest
    container_name: osc-cpolar
    restart: unless-stopped
    command: http 3002 -i
    volumes:
      # æŒä¹…åŒ– authtoken é…ç½®
      - cpolar-config:/root/.cpolar
    networks:
      - osc-network
    depends_on:
      audience:
        condition: service_healthy
    # æš´éœ² cpolar web ç®¡ç†ç•Œé¢
    ports:
      - "9200:9200"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ•°æ®å·ï¼ˆæŒä¹…åŒ– cpolar é…ç½®ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
volumes:
  cpolar-config:

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç½‘ç»œé…ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
networks:
  osc-network:

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ä½¿ç”¨è¯´æ˜
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ğŸ“ é¦–æ¬¡ä½¿ç”¨ - é…ç½® authtokenï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰ï¼š
#
#   1. æ³¨å†Œ cpolar: https://www.cpolar.com
#   2. ç™»å½•ååœ¨ã€ŒéªŒè¯ã€é¡µé¢å¤åˆ¶ authtoken
#   3. è¿è¡Œé…ç½®å‘½ä»¤ï¼š
#      docker run --rm -v cpolar-config:/root/.cpolar probezy/cpolar authtoken ä½ çš„TOKEN
#
# ğŸš€ å¯åŠ¨å›½å†…å…¬ç½‘æ¨¡å¼ï¼š
#   docker-compose -f docker-compose.yml -f docker-compose.cpolar.yml up -d
#
# ğŸ“¡ æŸ¥çœ‹å…¬ç½‘ URLï¼š
#   æ–¹å¼1ï¼šè®¿é—® cpolar ç®¡ç†ç•Œé¢ http://localhost:9200
#   æ–¹å¼2ï¼šdocker-compose logs cpolar-tunnel | grep "cpolar"
#
# ğŸ›‘ åœæ­¢ï¼š
#   docker-compose -f docker-compose.yml -f docker-compose.cpolar.yml down
#
# ğŸ’¡ è§‚ä¼—è®¿é—®ï¼ˆå›½å†…ä½å»¶è¿Ÿï¼‰ï¼š
#   å…¬ç½‘URLç±»ä¼¼ï¼šhttps://xxxx.cpolar.cn/audience-touch/
#
# âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
#   - cpolar å…è´¹ç‰ˆæœ‰å¸¦å®½å’Œæµé‡é™åˆ¶
#   - æ¯æ¬¡å¯åŠ¨ URL å¯èƒ½å˜åŒ–ï¼ˆé™¤éä½¿ç”¨ä»˜è´¹å›ºå®šåŸŸåï¼‰
#   - å›½å†…è®¿é—®å»¶è¿Ÿçº¦ 50-200msï¼Œæ¯” Cloudflare å¿«å¾ˆå¤š
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

